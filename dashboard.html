<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard - Neto Style</title>
<style>
  body { font-family:'Inter', sans-serif; background:#111; color:#fff; min-height:100vh; margin:0; }
  .container { padding:2rem; max-width:900px; margin:auto; }
  h1 { color:#C9A343; margin-bottom:1rem; }
  .card { background:#222; padding:1.5rem; border-radius:12px; margin-bottom:1rem; }
  .btn { background:#C9A343; color:#000; font-weight:bold; padding:0.8rem 1.5rem; border:none; border-radius:50px; cursor:pointer; text-decoration:none; transition:0.3s; }
  .btn:hover { background:#fff; color:#000; }
  .home-btn { position:absolute; top:20px; left:20px; background:#C9A343; color:#000; padding:0.5rem 1rem; border-radius:50px; text-decoration:none; font-weight:bold; transition:0.3s; }
  .home-btn:hover { background:#fff; color:#000; }
  form { display:flex; flex-direction:column; gap:1rem; margin-top:2rem; }
  select, input[type="datetime-local"] { padding:0.8rem; border-radius:8px; border:none; outline:none; background:#222; color:#fff; }
  #mensagem { margin-top:1rem; font-weight:bold; }
</style>
</head>
<body>
<a href="index.html" class="home-btn">Home</a>
<div class="container">
  <h1>Bem-vindo(a), <span id="usuarioNome"></span>!</h1>

  <div class="card">
    <h2>Agendar Serviço</h2>
    <form id="agendamentoForm">
      <label>Selecione o serviço:</label>
      <select id="servico" required>
        <option value="">-- Escolha um serviço --</option>
        <option value="Corte">Corte - R$28</option>
        <option value="Progressiva">Progressiva – R$ 72</option>
        <option value="Pigmentação">Pigmentação – R$ 17</option>
        <option value="Platinado">Platinado – a partir de R$ 72</option>
        <option value="Luzes Platinadas">Luzes platinadas – a partir de R$ 52</option>
      </select>

      <label>Selecione o profissional:</label>
      <select id="profissional" required>
        <option value="">-- Escolha um profissional --</option>
        <option value="Neto Style">✂️ Neto Style</option>
        <option value="Kervin Sancherz">✂️ Kervin Sancherz</option>
        <option value="Anderson Coutinho">✂️ Anderson Coutinho</option>
      </select>

      <label>Escolha a data e hora:</label>
      <input type="datetime-local" id="dataHora" required>

      <button type="submit" class="btn">Agendar</button>
    </form>
    <div id="mensagem"></div>
  </div>

  <div class="card">
    <h2>Seus agendamentos</h2>
    <ul id="listaAgendamentos"></ul>
  </div>
</div>

<script>
  const usuario = localStorage.getItem("usuario") || "Visitante";
  document.getElementById("usuarioNome").innerText = usuario;

  // Simulação de agendamentos armazenados localmente
  let agendamentos = JSON.parse(localStorage.getItem("agendamentos")) || [];

  const listaEl = document.getElementById("listaAgendamentos");

  function atualizarLista(){
    listaEl.innerHTML = '';
    const userAgend = agendamentos.filter(a => a.usuario === usuario);
    if(userAgend.length === 0) listaEl.innerHTML = '<li>Nenhum agendamento.</li>';
    userAgend.forEach(a => {
      const li = document.createElement('li');
      li.textContent = `${a.servico} com ${a.profissional} em ${new Date(a.dataHora).toLocaleString()}`;
      listaEl.appendChild(li);
    });
  }

  atualizarLista();

  document.getElementById("agendamentoForm").addEventListener("submit", function(e){
    e.preventDefault();
    const servico = document.getElementById("servico").value;
    const profissional = document.getElementById("profissional").value;
    const dataHora = document.getElementById("dataHora").value;

    if(!servico || !profissional || !dataHora) return;

    // Verifica conflito de horário
    const conflito = agendamentos.some(a => a.profissional === profissional && a.dataHora === dataHora);
    const mensagemEl = document.getElementById("mensagem");

    if(conflito){
      mensagemEl.textContent = "Este horário já está ocupado. Escolha outro.";
      mensagemEl.style.color = "#e63946";
      return;
    }

    agendamentos.push({ usuario, servico, profissional, dataHora });
    localStorage.setItem("agendamentos", JSON.stringify(agendamentos));
    mensagemEl.textContent = "Agendamento realizado com sucesso!";
    mensagemEl.style.color = "#C9A343";

    atualizarLista();
    this.reset();
  });
</script>
</body>
</html>
